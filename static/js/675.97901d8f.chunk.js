"use strict";(self.webpackChunkreact3=self.webpackChunkreact3||[]).push([[675],{675:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var s=n(791),i=n(184);const r=()=>{const[e,t]=(0,s.useState)(""),[n,r]=(0,s.useState)(!1);return(0,i.jsxs)("div",{id:"imgInput",children:[(0,i.jsxs)("div",{id:"local-file",className:n?"error":"",children:[(0,i.jsx)("div",{id:"customInputImg",children:"Upload"}),(0,i.jsx)("input",{type:"file",accept:".jpg, .jpeg",id:"imageInput",onChange:e=>{const n=e.target.files[0];if(n){if(n.size>5242880)return void r(!0);r(!1);const e=new FileReader;e.onloadend=()=>{const s=new Image;s.src=e.result,s.onload=()=>{s.width,s.height;const e=n.name;t(e)}},e.readAsDataURL(n)}else t("")},required:!0})]}),(0,i.jsx)("span",{className:n?"error":"",children:e?(0,i.jsx)("p",{children:e}):"Upload your photo"}),(0,i.jsx)("span",{id:"help",children:"Max file size 5mb and min img size 70x70"})]})};function a(e){let{testRadio:t}=e,[n,r]=(0,s.useState)([]);return(0,s.useEffect)((()=>{fetch("https://frontend-test-assignment-api.abz.agency/api/v1/positions").then((e=>e.json())).then((e=>{r(e.positions)}))}),[]),(0,i.jsxs)("ul",{children:[(0,i.jsx)("legend",{children:"Select your position:"}),n.map(((e,n)=>(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{type:"radio",name:"position",id:e.id,value:e.name,onChange:t,required:!0}),e.name]},n)))]})}let o=fetch("https://frontend-test-assignment-api.abz.agency/api/v1/token").then((function(e){return e.json()})).then((function(e){return o=e.token})).catch((function(e){}));var c=n(524);const l=n.p+"static/media/registred.75501c0e8626de1c97c1a1da9b8590f2.svg",d=(0,s.lazy)((()=>n.e(865).then(n.bind(n,865))));function u(e){let{type:t}=e;const[n,u]=(0,s.useState)(!1),[p,h]=(0,s.useState)("disabled"),[f,m]=(0,s.useState)(),[g,j]=(0,s.useState)(null);function x(){if(!1===n){const e=document.querySelector("form").querySelectorAll("input[required]");let t=!0;e.forEach((e=>{"file"===e.type?e.files&&0!==e.files.length||(t=!1):""===e.value.trim()&&(t=!1)})),h(t)}}return(0,s.useEffect)((()=>{const e=setInterval(x,1e3);return j(e),()=>{clearInterval(e)}}),[f,n]),(0,i.jsx)("section",{id:"form",className:t,children:n?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h1",{children:"User successfully registered"}),(0,i.jsx)("span",{children:(0,i.jsx)("img",{src:l,alt:""})})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h1",{children:"Working with POST request"}),(0,i.jsxs)("form",{action:"",children:[(0,i.jsx)(d,{}),(0,i.jsx)(a,{testRadio:function(e){m(e.target.id)}}),(0,i.jsx)(r,{})]}),(0,i.jsx)(c.Z,{text:"Sign up",type:p?"yellow":"disabled",func:()=>function(){var e=document.querySelector('input[type="file"]').files[0],t=new FormData,n=document.getElementById("phone").value.replace(/[\s\(\)\-]/g,"");t.append("position_id",f),t.append("name",document.getElementById("name").value),t.append("email",document.getElementById("email").value),t.append("phone",n),t.append("photo",e),fetch("https://frontend-test-assignment-api.abz.agency/api/v1/users",{method:"POST",body:t,headers:{Token:o}}).then((function(e){return e.json()})).then((function(e){e.success?(u(!0),clearInterval(g)):console.log("proccess server errors")})).catch((function(e){console.log("proccess network errors")}))}()})]})})}}}]);
//# sourceMappingURL=675.97901d8f.chunk.js.map